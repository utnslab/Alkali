#include "nfplib.h"
#include "prog_hdr.h"
#include "extern/extern_dma.h"
#include "extern/extern_net.h"

static struct lb_DIP_entries_t _loc_buf_49;
__xrw static struct lb_DIP_entries_t _loc_buf_49_xfer;
static struct connect_tracker_meta_header_t _loc_buf_41;
__xrw static struct connect_tracker_meta_header_t _loc_buf_41_xfer;
static struct lb_fwd_tcp_hdr_t _loc_buf_42;
__xrw static struct lb_fwd_tcp_hdr_t _loc_buf_42_xfer;
static struct firewall_meta_header_t _loc_buf_40;
__xrw static struct firewall_meta_header_t _loc_buf_40_xfer;
static int rr_ctr = 0;
__declspec(aligned(4)) struct event_param_NET_RECV_4 work;
__xrw struct event_param_NET_RECV_4 work_ref;
__declspec(aligned(4)) struct event_param_NET_SEND next_work_NET_SEND;
__xrw struct event_param_NET_SEND next_work_ref_NET_SEND;

__forceinline
void __event___handler_NET_RECV_4_process_packet_4_1() {
  uint32_t v1;
  uint32_t v2;
  uint32_t v3;
  uint32_t v4;
  uint32_t v5;
  __declspec(aligned(4)) struct event_param_NET_RECV_4* v6;
  __xrw struct event_param_NET_RECV_4* v7;
  __shared __cls struct context_chain_1_t* v8;
  uint32_t v9;
  uint32_t v10;
  struct __buf_t v11;
  uint32_t v12;
  uint32_t v13;
  uint32_t v14;
  uint32_t v15;
  uint16_t v16;
  uint32_t v17;
  __export __shared __cls struct table_i16_lb_DIP_entries_t_64_t* v18;
  struct firewall_meta_header_t* v19;
  struct connect_tracker_meta_header_t* v20;
  struct lb_fwd_tcp_hdr_t* v21;
  struct firewall_meta_header_t* v22;
  struct firewall_meta_header_t* v23;
  struct firewall_meta_header_t* v24;
  struct firewall_meta_header_t* v25;
  __xrw struct firewall_meta_header_t* v26;
  struct connect_tracker_meta_header_t* v27;
  struct connect_tracker_meta_header_t* v28;
  __xrw struct connect_tracker_meta_header_t* v29;
  struct lb_DIP_entries_t* v30;
  struct lb_DIP_entries_t* v31;
  uint64_t v32;
  uint32_t v33;
  uint64_t v34;
  struct lb_DIP_entries_t* v35;
  uint64_t v36;
  uint32_t v37;
  uint64_t v38;
  struct lb_DIP_entries_t* v39;
  uint32_t v40;
  struct lb_DIP_entries_t* v41;
  uint32_t v42;
  struct lb_DIP_entries_t* v43;
  uint32_t v44;
  uint16_t v45;
  struct lb_DIP_entries_t* v46;
  uint32_t v47;
  uint16_t v48;
  struct lb_DIP_entries_t* v49;
  uint32_t v50;
  uint32_t v51;
  uint32_t v52;
  uint32_t v53;
  uint64_t v54;
  struct lb_DIP_entries_t* v55;
  uint32_t v56;
  uint32_t v57;
  uint32_t v58;
  uint16_t v59;
  uint32_t v60;
  uint16_t v61;
  uint32_t v62;
  uint64_t v63;
  struct lb_fwd_tcp_hdr_t* v64;
  __xrw struct lb_fwd_tcp_hdr_t* v65;
  __declspec(aligned(4)) struct event_param_NET_SEND* v66;
  v1 = 134744072;
  v2 = 134744071;
  v3 = 0;
  v4 = 50;
  v5 = 60;
  v6 = &work;
  v7 = &work_ref;
  cls_workq_add_thread(WORKQ_ID_NET_RECV_4_1, v7, sizeof(*v7));
  *(v6) = *(v7);
  v8 = v6->ctx;
  v9 = v6->f0;
  v10 = v6->f1;
  v11 = v6->f2;
  v12 = v6->f3;
  v13 = v8->f1;
  v14 = v8->f4;
  v15 = v8->f3;
  v16 = v8->f0;
  v17 = v8->f2;
  v18 = &lb_table;
  v19 = &_loc_buf_40;
  v20 = &_loc_buf_41;
  v21 = &_loc_buf_42;
  v19->f1 = v17;
  v19->f2 = v15;
  v19->f0 = v14;
  v19->f3 = v13;
  v26 = &_loc_buf_40_xfer;
  *(v26) = *(v19);
  mem_write32(&v26->f0, v11.buf + v11.offs, 28);
  v11.offs += 28;
  v20->f0 = v10;
  v20->f1 = v12;
  v29 = &_loc_buf_41_xfer;
  *(v29) = *(v20);
  mem_write32(&v29->f0, v11.buf + v11.offs, 28);
  v11.offs += 28;
  v30 = &_loc_buf_49;
  *v30 = v18->table[lmem_cam_lookup(lb_table_index, v16, 64)];
  v30->f6 = v9;
  v32 = v30->f0;
  v33 = v32 + v14;
  v34 = (uint64_t) v33;
  v30->f0 = v34;
  v36 = v30->f1;
  v37 = v36 + v14;
  v38 = (uint64_t) v37;
  v30->f1 = v38;
  v40 = v1 + v14;
  v30->f2 = v40;
  v42 = v2 + v14;
  v30->f3 = v42;
  v44 = v4 + v14;
  v45 = (uint16_t) v44;
  v30->f4 = v45;
  v47 = v5 + v14;
  v48 = (uint16_t) v47;
  v30->f5 = v48;
  v50 = v1 + v2;
  v51 = v50 + v4;
  v52 = v51 + v5;
  v53 = v52 + v14;
  v54 = (uint64_t) v53;
  v30->f7 = v54;
  v18->table[lmem_cam_update(lb_table_index, v16, 64)] = *v30;
  v56 = v30->f2;
  v57 = v30->f3;
  v58 = v56 + v57;
  v59 = v30->f4;
  v60 = v58 + v59;
  v61 = v30->f5;
  v62 = v60 + v61;
  v63 = (uint64_t) v62;
  v21->f0 = v63;
  v65 = &_loc_buf_42_xfer;
  *(v65) = *(v21);
  mem_write32(&v65->f0, v11.buf + v11.offs, 20);
  v11.offs += 20;
  v66 = &next_work_NET_SEND;
  v66->ctx = v8;
  v66->f0 = v11;
  next_work_NET_SEND.meta.len = next_work_NET_SEND.f0.sz;
  inlined_net_send(v66);
  return;
}


int main(void) {
	init_me_cam(16);
	init_recv_event_workq(WORKQ_ID_NET_RECV_4_1, workq_NET_RECV_4_1, WORKQ_TYPE_NET_RECV_4, WORKQ_SIZE_NET_RECV_4, 8);
	wait_global_start_();
	for (;;) {
		__event___handler_NET_RECV_4_process_packet_4_1();
	}
}
